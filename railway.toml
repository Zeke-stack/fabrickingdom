[build]
builder = "NIXPACKS"

[deploy]
healthcheckTimeout = 100
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10
healthcheckProtocol = "TCP"
healthcheckPort = 25565

[[services]]
name = "minecraft-server"

[services.variables]
MINECRAFT_VERSION = "1.21.1"
MINECRAFT_TYPE = "PAPER"
EULA = "true"
SERVER_PORT = "25565"
RCON_PORT = "25575"
ENABLE_RCON = "true"

[services.resources]
memory = "2048Mi"
cpu = "1000m"

[services.volumes]
mountPath = "/app/server"
size = "10Gi"

[env]
PORT = "25565"

# Auto-save configuration
[services.environment]
AUTOSAVE_INTERVAL = "60"  # Save every 60 seconds
MAX_BACKUPS = "10"
