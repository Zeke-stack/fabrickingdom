[build]
builder = "NIXPACKS"

[deploy]
healthcheckTimeout = 100
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10
healthcheckProtocol = "TCP"
healthcheckPort = 25565

[[services]]
name = "minecraft-server"

[services.variables]
MINECRAFT_VERSION = "1.21.1"
MINECRAFT_TYPE = "PAPER"
EULA = "true"
SERVER_PORT = "25565"
RCON_PORT = "25575"
ENABLE_RCON = "false"
MEMORY_MIN = "2G"
MEMORY_MAX = "4G"

[services.resources]
memory = "4096Mi"
cpu = "2000m"

[services.volumes]
mountPath = "/app/server"
size = "20Gi"

[env]
PORT = "25565"

# Kingdom Server Configuration
[services.environment]
SERVER_NAME = "Kingdom of Minecraftia"
MOTD = "§6✦ Kingdom of Minecraftia §7- §eMedieval Roleplay §6✦"
DIFFICULTY = "hard"
ONLINE_MODE = "true"
PVP = "true"
MAX_PLAYERS = "20"
VIEW_DISTANCE = "12"
SPAWN_PROTECTION = "16"
AUTOSAVE_INTERVAL = "60"
MAX_BACKUPS = "10"

# Resource Pack Configuration
RESOURCE_PACK = ""
RESOURCE_PACK_SHA1 = ""

# Kingdom Plugin Settings
KINGDOM_ENABLED = "true"
STAFF_SYSTEM = "true"
COIN_ECONOMY = "true"
MEDIEVAL_THEME = "true"
